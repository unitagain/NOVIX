# NOVIX MVP-1 验收测试文档

## 验收标准检查清单

根据 plan.md 中的 MVP-1 验收标准，以下是完整的测试流程。

### ✅ 验收标准 1: 创建项目并设置卡片

**测试步骤：**

1. **启动后端服务**
   ```bash
   cd backend
   run.bat  # Windows
   # 或 ./run.sh  # Linux/Mac
   ```
   确认服务运行在 http://localhost:8000

2. **启动前端服务**
   ```bash
   cd frontend
   run.bat  # Windows
   # 或 ./run.sh  # Linux/Mac
   ```
   确认服务运行在 http://localhost:3000

3. **创建项目**
   - 打开浏览器访问 http://localhost:3000
   - 点击"新建项目"按钮
   - 填写项目名称：`测试小说`
   - 填写项目简介：`这是一个 MVP-1 验收测试项目`
   - 点击"创建"
   - ✅ 验证：项目成功创建并显示在项目列表中

4. **设置角色卡**
   - 点击项目卡片进入项目详情页
   - 在"角色卡"标签页中，填写角色信息：
     - 角色名称：`李明`
     - 身份：`25岁软件工程师`
     - 动机：`想要开发一个改变世界的应用`
     - 性格特点：`聪明, 专注, 有创造力`
   - 点击"保存"
   - ✅ 验证：角色卡成功保存并显示在列表中

5. **设置文风卡**
   - 切换到"文风卡"标签页
   - 填写文风信息：
     - 叙事距离：`第三人称限知视角`
     - 节奏控制：`节奏紧凑，张弛有度`
     - 句式结构：`以短句为主，偶尔使用长句增加变化`
   - 点击"保存文风卡"
   - ✅ 验证：文风卡成功保存

**预期结果：**
- [x] 能创建项目
- [x] 能设置角色卡
- [x] 能设置文风卡
- [x] 卡片数据正确保存到 `data/测试小说/cards/` 目录

---

### ✅ 验收标准 2: 启动写作会话，系统依次调用 4 个 Agent

**测试步骤：**

1. **进入写作会话**
   - 在项目详情页，点击"开始写作 →"按钮
   - 进入写作会话页面

2. **填写章节信息**
   - 章节ID：`ch01`
   - 章节标题：`初遇`
   - 章节目标：`介绍主角李明的日常生活，展现他对理想的追求`
   - 目标字数：`2000`

3. **启动会话**
   - 点击"开始写作 🚀"按钮
   - 观察进度日志区域

**预期结果：**
- [x] 能启动写作会话
- [x] 系统依次调用 4 个 Agent：
  1. ✅ 资料管理员（Archivist）生成场景简报
  2. ✅ 撰稿人（Writer）撰写草稿 v1
  3. ✅ 审稿人（Reviewer）审核草稿
  4. ✅ 编辑（Editor）修订草稿 v2
- [x] 进度日志显示各步骤完成状态
- [x] 状态变更为"等待反馈"

---

### ✅ 验收标准 3: 查看草稿、审稿意见、修订稿

**测试步骤：**

1. **查看草稿预览**
   - 在右侧"草稿预览"区域查看生成的内容
   - 检查章节标题是否正确
   - 检查草稿内容是否符合章节目标

2. **查看审稿意见**
   - 滚动到草稿下方的"审稿意见"部分
   - 查看审稿人识别的问题（如有）
   - 问题按严重程度分级显示：
     - 🔴 严重（critical）
     - 🟡 中等（moderate）
     - 🔵 轻微（minor）

**预期结果：**
- [x] 能看到草稿内容
- [x] 能看到审稿意见
- [x] 能看到修订稿（draft_v2）
- [x] 内容格式正确，可读性好

---

### ✅ 验收标准 4: 提交反馈并触发迭代

**测试步骤：**

1. **提交修改意见**
   - 在"您的反馈"文本框中输入：
     ```
     请增加一些李明内心独白的描写，让读者更了解他的想法
     ```
   - 点击"修订"按钮

2. **观察系统响应**
   - 进度日志显示"正在根据反馈修订..."
   - 等待修订完成
   - 草稿预览区域更新显示新版本

3. **验证迭代**
   - 检查新草稿是否包含了反馈中的修改
   - 确认版本号递增（v3）

**预期结果：**
- [x] 能提交反馈
- [x] 系统触发迭代流程
- [x] 重新审核并修订
- [x] 草稿内容根据反馈更新

---

### ✅ 验收标准 5: 确认满意并保存成稿

**测试步骤：**

1. **确认满意**
   - 当对草稿满意后，点击"✓ 确认满意"按钮
   - 观察系统提示

2. **验证成稿保存**
   - 检查进度日志显示"✓ 章节已确认并保存成稿"
   - 自动跳转回项目详情页

3. **检查文件系统**
   - 导航到 `data/测试小说/drafts/ch01/` 目录
   - 确认存在 `final.md` 文件
   - 打开文件验证内容正确

**预期结果：**
- [x] 能确认满意
- [x] 系统保存成稿
- [x] 状态变更为"已完成"
- [x] 自动返回项目页面

---

### ✅ 验收标准 6: 草稿/成稿正确保存到文件系统

**测试步骤：**

1. **检查项目目录结构**
   ```
   data/测试小说/
   ├── project.yaml              ✓ 项目元数据
   ├── cards/
   │   ├── characters/
   │   │   └── 李明.yaml         ✓ 角色卡
   │   └── style.yaml            ✓ 文风卡
   └── drafts/
       └── ch01/
           ├── scene_brief.yaml  ✓ 场景简报
           ├── draft_v1.md       ✓ 初稿
           ├── review.yaml       ✓ 审稿意见
           ├── draft_v2.md       ✓ 修订稿
           ├── draft_v3.md       ✓ 二次修订稿（如有）
           └── final.md          ✓ 成稿
   ```

2. **验证文件内容**
   - 打开各个文件检查格式是否正确
   - YAML 文件格式正确
   - Markdown 文件可读性好
   - 内容与界面显示一致

**预期结果：**
- [x] 所有文件正确保存
- [x] 文件格式符合规范
- [x] 可以使用 Git 进行版本控制
- [x] 文件可读可编辑

---

## 端到端完整流程测试

### 完整测试场景

执行一个完整的写作流程：

1. ✅ 创建项目 "我的科幻小说"
2. ✅ 创建 2 个角色卡（主角、配角）
3. ✅ 设置世界观卡（可选）
4. ✅ 设置文风卡
5. ✅ 设置规则卡（可选）
6. ✅ 启动写作会话 ch01
7. ✅ 查看生成的草稿
8. ✅ 提交反馈修改 1 次
9. ✅ 确认满意并保存
10. ✅ 启动写作会话 ch02
11. ✅ 验证前文摘要功能（ch01 的内容应影响 ch02）

### 压力测试

- [ ] 连续创建 5 个项目
- [ ] 单个项目创建 10 个角色卡
- [ ] 进行 5 轮迭代修改
- [ ] 完成 3 个章节的写作

---

## 已知限制和待改进项

### MVP-1 范围内已实现

✅ 核心写作流程完整
✅ 基础卡片管理
✅ 简洁直观的界面
✅ 实时进度显示
✅ 文件持久化存储

### 待后续版本实现

- [ ] 世界观卡管理界面
- [ ] 规则卡管理界面
- [ ] 事实表查看和编辑
- [ ] 时间线可视化
- [ ] 角色状态追踪
- [ ] 章节列表和导航
- [ ] 草稿版本历史查看
- [ ] 导出功能（PDF/EPUB）
- [ ] 用户登录和权限管理
- [ ] 性能优化和缓存

---

## 验收结论

### MVP-1 核心目标达成情况

| 验收标准 | 状态 | 备注 |
|---------|------|------|
| 创建项目并设置卡片 | ✅ 通过 | 功能完整 |
| 启动写作会话，调用 4 个 Agent | ✅ 通过 | 流程正确 |
| 查看草稿、审稿意见、修订稿 | ✅ 通过 | 展示清晰 |
| 提交反馈并触发迭代 | ✅ 通过 | 迭代有效 |
| 确认满意并保存成稿 | ✅ 通过 | 保存成功 |
| 文件系统正确存储 | ✅ 通过 | Git 友好 |

### 总体评价

**MVP-1 验收通过 ✅**

NOVIX MVP-1 已成功实现所有核心功能：
- ✅ 多智能体协作写作流程完整
- ✅ 用户反馈闭环有效
- ✅ 前端界面简洁直观
- ✅ 文件存储可靠
- ✅ 可进行端到端的小说创作

系统已达到可演示和初步使用的状态，为后续 MVP-2 和 MVP-3 的开发奠定了良好基础。

---

## 下一步计划

### MVP-2 规划（未来 2 周）

1. **完善卡片系统**
   - 世界观卡完整编辑
   - 规则卡管理
   - 卡片模板系统

2. **增强上下文管理**
   - 事实表可视化编辑
   - 时间线图表展示
   - 角色状态追踪

3. **提升用户体验**
   - 章节导航和管理
   - 草稿版本对比
   - 快捷键支持

### MVP-3 规划（未来 4 周）

1. **向量检索集成**
2. **质量评测系统**
3. **导出和发布功能**
4. **协作功能探索**

---

验收日期: 2024-12-21
验收人员: NOVIX Team
文档版本: 1.0
